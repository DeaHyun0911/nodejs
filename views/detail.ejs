<!DOCTYPE html>
<html lang="en">

  <%- include('header.html') %>

<body>

  <%- include('nav.html') %>

  <div>
  <div class="container py-5">
    <div class="card w-100" style="width: 18rem;">
      <div class="card-body">
        <h5 class="card-title"><%= data.제목 %></h5>
        <h6 class="card-subtitle mb-2 text-muted"><%= data.날짜 %></h6>
        <p><%= data.내용 %></p>
        <% if (user && user._id.toString() == data.작성자.toString()) { %> 
          <div class="btn-wrap">
            <a href="/edit/<%= data._id %>" class="btn btn-secondary">수정</a>
            <a class="delete btn btn-secondary" data-id="<%= data._id %>">삭제</a>
          </div>
        <% } %>
      </div>
    

      
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.3.min.js"
integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>


<script>

  $('.delete').click(function (e) {
    var postNum = e.target.dataset.id;
    var currentClick = $(this);
    $.ajax({
      method: 'DELETE',
      url: '/delete',
      data: { _id: postNum }
    }).done(function (결과) {
      console.log('성공')
      window.location.replace('/')
    }).fail(function () {
      console.log('실패');
    })
  })

</script>



  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
    integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
    crossorigin="anonymous"></script>
</body>

</html>